# LLMベンチマークプロンプト

## LLMベンチマーク評価項目

### 1. 情報抽出能力
- 構造化されていないテキストからの必須項目抽出精度
- 複数の情報源（最新返信・引用部分）からの適切な情報識別
- 曖昧な表記や全角/半角混在への対応力
- 欠損データの適切な処理

### 2. 数値計算・論理処理能力
- 四則演算の正確性
- 複数変数を用いた計算式の実行精度
- エラーケース（欠損値・異常値）の検出と処理
- 計算結果の妥当性検証

### 3. 指示追従性
- プロンプトで指定されたルールの遵守度
- 出力フォーマットの厳密な再現性
- 禁止事項（余計な説明・マークダウン記号等）の回避
- 複雑な条件分岐の正確な実行

### 4. 自然言語生成品質
- 文法的正確性と自然な日本語表現
- ビジネス文書としての適切性
- 敬語表現の正確な使用
- 簡潔性と明瞭性のバランス



## プロンプト内容

### 1. 情報抽出テスト
```
あなたは製造業の「納期確認依頼メール」から情報を抽出して構造化するアシスタントです。
入力として「受信した1通のメール本文全文（最新返信＋引用文を含む可能性あり）」が与えられます。

# 目的
メール本文から、依頼対象の「品番 / 納期 / 数量」を高精度に抽出し、構造化して出力する。

# 最重要注意
- 「回答期限（返信期限・対応期限・締切・本日中・◯日までに返信等）」を「納期」と誤認しないこと。
- 納期は原則「品番に紐づいた納期（例：◯/◯納期、希望納期、納入日、出荷希望日など）」のみを採用する。

# 抽出対象（必須）
- 品番
- 数量
- 納期（品番の納期）

# 前処理（表記ゆれ対応）
- 全角数字・全角記号（／－　等）を半角へ正規化してから抽出する（ただし根拠表示用に原文も保持）。
- 連続空白やタブは1つの空白に正規化する。
- 「個」「pcs」「PC」「ｺ」など数量単位の表記ゆれに対応する。

# メール構造の扱い（最新返信・引用の識別）
1) まず「最新返信」と「引用部分」を分離する。
   - 引用開始の典型例： 
     - "On YYYY/MM/DD ... wrote:"
     - "-----Original Message-----"
     - "From:" "Sent:" "To:" "Subject:" のブロック
     - 行頭が ">" や "＞" の連続
2) 抽出は両方を探索してよいが、同一品番が重複する場合は「最新返信側の情報を優先」する。
3) 最新返信側に品番が無く、引用側にのみ存在する場合は引用側から採用してよい。

# 抽出ルール（精度重視）
## 1) 品番
- 英数字＋記号（- _ / など）を含む型番らしいトークンを候補にする。
- 例：15B177-0002 のような形式を強く品番候補とみなす。
- “品番：”があればそれを最優先。

## 2) 数量
- 「数字 + 単位（個/pcs/PC 等）」を数量とする。
- 例：5個 / 500 pcs / 10PC
- 単位が無い場合でも、品番の近傍（同一行や前後1～2行）にある数値が数量として自然なら数量候補にする。
- 数量が複数あり得る場合は、品番に最も近いものを優先し、根拠を残す。

## 3) 納期（ここが最重要）
- 納期として採用してよいのは、次の条件のいずれかを満たす日付だけ：
  A. 日付の近傍（同一行内、または前後10文字程度）に「納期 / 希望納期 / 納入日 / 出荷希望 / 着日」等の納期語がある
  B. 品番と同一行に日付があり、かつ行内に「納期」等がある（例： 15B... 5個 1/12納期）
- 逆に、次の語の近傍にある日付は「回答期限（返信期限）」として扱い、納期にしない：
  - 回答期限 / 返信期限 / 対応期限 / 締切 / 期限 / までに回答 / までに返信 / 本日中 / 至急ご回答 / ◯日迄にご連絡
- 年が書かれていない日付（例：1/12, 1月12日）は「原文表記のまま」保持し、勝手に年を補完しない（必要なら別フィールドに不明として扱う）。

# ペアリング（品番・数量・納期の紐づけ）
- 原則：品番が出現する行を起点に、同一行→前後1～2行の順で数量と納期を探索し紐づける。
- メールに複数品番がある場合は、品番ごとに独立して抽出する。
- どうしても紐づけが曖昧なら、欠損（null）にして「要確認」を付ける（誤抽出しない）。

# 欠損データの処理
- 見つからない項目は null にする。
- null がある場合は reasons に「何が不足か」「どこまで特定できたか」を簡潔に書く。

# 出力形式（厳守：JSONのみ）
{
  "items": [
    {
      "品番": "... or null",
      "数量": "... or null",
      "納期_raw": "... or null",
      "納期_normalized": "... or null",
      "source_section": "latest_reply | quoted | unknown",
      "evidence": {
        "品番": "根拠となった原文の短い抜粋",
        "数量": "根拠となった原文の短い抜粋",
        "納期": "根拠となった原文の短い抜粋"
      },
      "reasons": ["注意点や要確認があれば配列で"]
    }
  ]
}

- 納期_normalized は、年が不明なら "MM/DD" など原文に近い形で正規化（例：1/12 → 01/12）。年まで確定できる場合のみ YYYY-MM-DD にしてよい。
- evidence は長文にしない（1行程度）。

# 入力（このあとにメール本文全文が続く）
<<EMAIL_BODY>>

```

### 2. 計算テスト
```
下記の計算問題を解いてください。
## 足し算（＋）

1. 3,486 + 9,275 = 
2. 58 + 247 + 1,095 = 
3. 0.75 + 2.38 = 

## 引き算（−）

1. 10,000 − 3,457 = 
2. 825 − 96 = 
3. 5.2 − 1.85 = 

## 掛け算（×）

1. 37 × 48 = 
2. 125 × 36 = 
3. 2.4 × 0.75 = 

## 割り算（÷）

1. 864 ÷ 24 = 
2. 1,260 ÷ 35 = 
3. 7.5 ÷ 0.25 = 

-----------
回答：
-----------
## 足し算（＋）

1. 3,486 + 9,275 = **12,761**
2. 58 + 247 + 1,095 = **1,400**
3. 0.75 + 2.38 = **3.13**

## 引き算（−）

1. 10,000 − 3,457 = **6,543**
2. 825 − 96 = **729**
3. 5.2 − 1.85 = **3.35**

## 掛け算（×）

1. 37 × 48 = **1,776**
2. 125 × 36 = **4,500**
3. 2.4 × 0.75 = **1.8**

## 割り算（÷）

1. 864 ÷ 24 = **36**
2. 1,260 ÷ 35 = **36**
3. 7.5 ÷ 0.25 = **30**
```

### 3. 指示追従性
```
500文字ちょうどの文章を作成してください
```

### 4. テキスト生成
```
知性(Intelligence)と知能(Wisdom)はしばしば混同されますが、哲学や心理学においては区別される概念です。この2つの概念の主な違いを、それぞれの定義、特徴、そして人生や社会における役割という観念から説明してください。
```